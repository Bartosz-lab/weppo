<script src="/scripts/script.js"></script>
<div class="navigation" id="header">
    <div style="float: left; width: 16%; text-align: center;"> <a href ="/">Y-kom</a></div>
    <div style="width: 68%; text-align: center; float: left;">
        <form method="get" action="/search">
            <input type="text" name="search" placeholder="Czego szukasz?">
            <input type="submit" value = "Szukaj">
        </form>
    </div>
    <div style="float: left; width: 16%; text-align: left;">
        <div style="float: left; padding-right:3px; text-align: center;" class="links2">
            <a href="/basket" class="richbutton">Koszyk</a>
        </div>
        <% if( user_role != undefined ) { %>
            <div style="float: left; text-align: center;" class="links2 dropdown">
                <a href="/account" class="richbutton">Konto</a>
                <div class="dropdown-content">
                     <%- include("../user-nav") %> 
                </div>
            </div>
        <% } else { %>
            <div style="float: left; text-align: center;" class="links2">
                <a href="/login" class="richbutton">Zaloguj się</a>
            </div>
        <% } %>
    </div>

    <br>
    <div id="links">
        <ol>
                <% let last_cat = 0; %>
                <!-- przechodzimy po wszystkich subkategoriach -->
                <% for(const subcat of subcats) { %>
                <!-- sprawdzamy czy zmieniła się kategoria główna -->
                <% if(last_cat != subcat.cat_id) { %>
                    <!-- Jeśli tak to dodajemy nową listę subkategorii -->
                    <% if(last_cat != 0) { %>
                        <!-- musimy zakończyć poprzednio zaczętą listę -->
                    </div></div></li>
                    <% } %>
                <li><div class="dropdown"><%= cats[last_cat++].val %>
                <div class="dropdown-content" style="font-size: 1.2em; transform: translateX(-100px);">
                <% } %>
                <a href="/c/<%= subcat.id %>"><%= subcat.val %></a><br>
                <% } %>
            </ol></li>
        </ol>
    </div>
</div>